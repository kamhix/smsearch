{% extends 'layout/info.html' %}

{% block content %}
  <div class="row">
    <div class="col-sm-8 col-sm-offset-2">
      {% if list.length > 0 %}
        <table class="table table-striped table-bordered table-hover table-condensed">
          <thead>
            <th class="text-center">Informations</th>
            <th class="text-center">Tags</th>
            <th class="text-center">Mise à jour</th>
            <th class="text-center">Suppression</th>
          </thead>
          <tbody>
            {% for info in list %}
              <row>
                <td class="text-center">{{info.info}}</td>
                <td class="text-center">{{info.tags}}</td>
                <td class="text-center"><a href="/info/update/{{info._id}}" class="text-primary">Mettre à jour</a></</td>
                <td class="text-center"><a href="#" onclick="deleteInfo('{{info._id}}')" class="text-danger" data-toggle="modal" data-target="#deleteModal">Supprimer</a></</td>
              </row>
            {% endfor %}
          </tbody>
          <tfoot>
            <th class="text-center">Informations</th>
            <th class="text-center">Tags</th>
            <th class="text-center">Mise à jour</th>
            <th class="text-center">Suppression</th>
          </tfoot>
        </table>
      {% else %}
        <div class="message text-center">
          <p>Il n'y a aucune information disponible.</p>
        </div>
      {% endif %}
    </div>

    <div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-sm">
        <div class="modal-content">
          <p class="text-right">
          </p>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
          <h4 class="modal-title" id="myModalLabel">Supprimer l'information</h4>
        </div>
        <div class="modal-body">
          <p>Cette opération est irréverssible ! Êtes-vous sûr de vouloir la poursuivre ?</p>
        </div>
        <div class="modal-footer">
          <a href="" class="btn btn-primary">Annuler</a>
          <a href="" class="btn btn-danger" id="deleteBtn">Supprimer</a>
        </div>
      </div>
    </div>
  </div>

  <script>
    var deleteInfo = function (id) {
      document.getElementById('deleteBtn').href = '/info/delete/' + id;
    };
  </script>
{% endblock %}
